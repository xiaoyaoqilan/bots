# ç½‘æ ¼é…ç½®ç”Ÿæˆå™¨ - Grid Configuration Generator

## ğŸ“– ç®€ä»‹

ç½‘æ ¼é…ç½®ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äºæ ¹æ®**Uæœ¬ä½è®¾ç½®æ–¹æ¡ˆ**è‡ªåŠ¨è®¡ç®—ç½‘æ ¼å‚æ•°å¹¶ç”Ÿæˆ/æ›´æ–°é…ç½®æ–‡ä»¶ã€‚

### ğŸ¯ è§£å†³çš„é—®é¢˜

ä¼ ç»Ÿçš„ç½‘æ ¼é…ç½®éœ€è¦æ‰‹åŠ¨è®¡ç®—ä»¥ä¸‹å‚æ•°ï¼š
- `grid_interval` (ç½‘æ ¼é—´éš”)
- `order_amount` (æ¯æ ¼æ•°é‡)
- `martingale_increment` (é©¬ä¸é€’å¢)
- `quantity_precision` (æ•°é‡ç²¾åº¦)
- `price_decimals` (ä»·æ ¼ç²¾åº¦)

è¿™äº›è®¡ç®—éå¸¸ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚**ç½‘æ ¼é…ç½®ç”Ÿæˆå™¨**è®©ä½ åªéœ€è®¾ç½®ï¼š
- æ¯æ ¼æŠ•å…¥é‡‘é¢ï¼ˆå¦‚ $12 USDCï¼‰
- ç½‘æ ¼åŒºé—´ç™¾åˆ†æ¯”ï¼ˆå¦‚ 50%ï¼‰
- æ€»ç½‘æ ¼æ•°ï¼ˆå¦‚ 500ï¼‰

å·¥å…·ä¼šè‡ªåŠ¨è®¡ç®—æ‰€æœ‰å‚æ•°å¹¶æ›´æ–°é…ç½®æ–‡ä»¶ï¼

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬ä½¿ç”¨

```bash
# åªéœ€è¾“å…¥ä»£å¸åç§°ï¼ˆå¤§å°å†™éƒ½è¡Œï¼‰
python3 tools/grid_config_generator.py btc
python3 tools/grid_config_generator.py ETH
python3 tools/grid_config_generator.py Bnb
```

### 2. å·¥ä½œæµç¨‹

```
è¾“å…¥ä»£å¸åç§°
    â†“
è‡ªåŠ¨è·å–ä»·æ ¼
    â†“
è‡ªåŠ¨è®¡ç®—å‚æ•°
    â†“
ç”Ÿæˆ/æ›´æ–°é…ç½®æ–‡ä»¶
    â†“
ã€å¯é€‰ã€‘è‡ªåŠ¨åŒæ­¥åˆ°å…¶ä»–ç›®å½•
    â†“
å®Œæˆï¼
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### å·¥å…·é…ç½®æ–‡ä»¶

ç¼–è¾‘ `tools/grid_config_generator.yaml` æ¥è®¾ç½®é»˜è®¤å‚æ•°ï¼š

```yaml
# ç½‘æ ¼å‚æ•°ï¼ˆUæœ¬ä½æ–¹æ¡ˆï¼‰
grid_value_per_order: 12          # æ¯æ ¼æŠ•å…¥é‡‘é¢ï¼ˆUSDCï¼‰
grid_range_percentage: 50         # ç½‘æ ¼åŒºé—´ç™¾åˆ†æ¯”ï¼ˆ%ï¼‰
follow_grid_count: 500            # æ€»ç½‘æ ¼æ•°

# é©¬ä¸æ ¼å°”é…ç½®
enable_martingale: false          # æ˜¯å¦å¯ç”¨Uæœ¬ä½é©¬ä¸é€’å¢
martingale_increment_usd: 1       # Uæœ¬ä½é€’å¢é‡‘é¢ï¼ˆUSDC/æ ¼ï¼‰

# äº¤æ˜“æ‰€é…ç½®
exchange: "lighter"               # äº¤æ˜“æ‰€åç§°
direction: "long"                 # æ–¹å‘ï¼šlong(åšå¤š) | short(åšç©º)
market_type: "perp"               # å¸‚åœºç±»å‹ï¼šperp(æ°¸ç»­åˆçº¦) | spot(ç°è´§)

# è‡ªåŠ¨åŒæ­¥é…ç½®
auto_sync: true                   # æ˜¯å¦è‡ªåŠ¨åŒæ­¥åˆ°å…¶ä»–ç›®å½•
```

---

## ğŸ“Š è®¡ç®—ç¤ºä¾‹

### è¾“å…¥å‚æ•°
```yaml
ä»£å¸: BTC
å½“å‰ä»·æ ¼: $100,000
æ¯æ ¼ä»·å€¼: $12 USDC
ç½‘æ ¼åŒºé—´: 50%
æ€»ç½‘æ ¼æ•°: 500
æ–¹å‘: åšå¤š (long)
```

### è®¡ç®—è¿‡ç¨‹ï¼ˆåšå¤šï¼‰

1. **ä»·æ ¼åŒºé—´**
   - åšå¤šï¼šä»å½“å‰ä»·æ ¼å‘ä¸‹æ‰©å±•
   - ä¸Šé™ = $100,000
   - ä¸‹é™ = $100,000 Ã— (1 - 50%) = $50,000
   - åŒºé—´ = [$50,000, $100,000]

2. **ç½‘æ ¼é—´éš”**
   ```
   grid_interval = ($100,000 - $50,000) / 500
                 = $100 / æ ¼
   ```

3. **é¦–æ ¼ä»·æ ¼**
   ```
   first_grid_price = $50,000 + $100
                    = $50,100
   ```

4. **æ¯æ ¼åŸºç¡€æ•°é‡**
   ```
   order_amount = $12 / $50,100
                = 0.0002395 BTC
   ```

5. **é©¬ä¸é€’å¢**ï¼ˆå¦‚æœå¯ç”¨Uæœ¬ä½é©¬ä¸ï¼‰
   ```
   avg_price = ($50,000 + $100,000) / 2
             = $75,000
   
   martingale_increment = $1 / $75,000
                        = 0.00001333 BTC/æ ¼
   ```

### è¾“å‡ºç»“æœ

```yaml
follow_grid_count: 500
grid_interval: 100
order_amount: 0.0002395
quantity_precision: 5
price_decimals: 1
martingale_increment: 0.00001333  # å¦‚æœå¯ç”¨
```

---

## ğŸ¨ æ–‡ä»¶å‘½åè§„åˆ™

### é…ç½®æ–‡ä»¶å‘½åæ ¼å¼

```
{exchange}-{direction}-{market_type}-{symbol}.yaml
```

### ç¤ºä¾‹

| æ–‡ä»¶å | è¯´æ˜ |
|--------|------|
| `lighter-long-perp-btc.yaml` | Lighter, åšå¤š, æ°¸ç»­åˆçº¦, BTC |
| `lighter-short-perp-eth.yaml` | Lighter, åšç©º, æ°¸ç»­åˆçº¦, ETH |
| `lighter-long-spot-bnb.yaml` | Lighter, åšå¤š, ç°è´§, BNB |

### ä»£å¸ç¬¦å·è§„åˆ™

- **æ–‡ä»¶å**ï¼šä½¿ç”¨å°å†™ï¼ˆå¦‚ `btc`, `eth`, `bnb`ï¼‰
- **é…ç½®ä¸­çš„ symbol å­—æ®µ**ï¼šä½¿ç”¨å¤§å†™ï¼ˆå¦‚ `BTC`, `ETH`, `BNB`ï¼‰

**å·¥å…·ä¼šè‡ªåŠ¨å¤„ç†å¤§å°å†™è½¬æ¢ï¼**

---

## ğŸ”„ è‡ªåŠ¨åŒæ­¥åŠŸèƒ½

### å¯ç”¨è‡ªåŠ¨åŒæ­¥

åœ¨ `tools/grid_config_generator.yaml` ä¸­ï¼š

```yaml
auto_sync: true                   # å¯ç”¨è‡ªåŠ¨åŒæ­¥
sync_script: "./sync_configs.sh"  # åŒæ­¥è„šæœ¬è·¯å¾„
```

### å·¥ä½œæµç¨‹

```
ç”Ÿæˆ/æ›´æ–°é…ç½®æ–‡ä»¶
    â†“
è‡ªåŠ¨è°ƒç”¨ ./sync_configs.sh
    â†“
åŒæ­¥åˆ°æ‰€æœ‰è´¦æˆ·ç›®å½•
    â†“
å®Œæˆï¼
```

### åŒæ­¥ç¤ºä¾‹

```bash
# ç”ŸæˆBTCé…ç½®å¹¶è‡ªåŠ¨åŒæ­¥
python3 tools/grid_config_generator.py btc

# è¾“å‡ºï¼š
# âœ… é…ç½®æ–‡ä»¶å·²ä¿å­˜: lighter-long-perp-btc.yaml
# ğŸ”„ æ­£åœ¨åŒæ­¥é…ç½®åˆ°å…¶ä»–ç›®å½•...
# âœ… åŒæ­¥å®Œæˆï¼5ä¸ªè´¦æˆ·å·²æ›´æ–°
```

---

## ğŸ“ å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šç”ŸæˆBTCé…ç½®

```bash
# 1. ä¿®æ”¹é»˜è®¤å‚æ•°ï¼ˆå¯é€‰ï¼‰
vim tools/grid_config_generator.yaml

# 2. è¿è¡Œç”Ÿæˆå™¨
python3 tools/grid_config_generator.py btc
```

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
==================================================
  ğŸš€ ç½‘æ ¼é…ç½®ç”Ÿæˆå™¨ - Grid Configuration Generator
==================================================

âœ… å·¥å…·é…ç½®åŠ è½½æˆåŠŸ

ğŸ“¡ æ­£åœ¨è·å– BTC ä»·æ ¼...
âœ… è·å–ä»·æ ¼æˆåŠŸ: BTC = $99,845.50

ğŸ§® æ­£åœ¨è®¡ç®—ç½‘æ ¼å‚æ•°...
âœ… è®¡ç®—å®Œæˆ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ğŸ“Š è®¡ç®—ç»“æœæ‘˜è¦ - BTC
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” ä»·æ ¼ä¿¡æ¯ï¼š
  â€¢ å½“å‰ä»·æ ¼: $99,845.50
  â€¢ ä»·æ ¼åŒºé—´: [$49,922.75, $99,845.50]
  â€¢ é¦–æ ¼ä»·æ ¼: $50,022.59
  â€¢ å¹³å‡ä»·æ ¼: $74,884.13

âš™ï¸  ç½‘æ ¼å‚æ•°ï¼š
  â€¢ æ€»ç½‘æ ¼æ•°: 500
  â€¢ ç½‘æ ¼é—´éš”: 99.845400
  â€¢ æ¯æ ¼æ•°é‡: 0.00023989
  â€¢ æ•°é‡ç²¾åº¦: 5
  â€¢ ä»·æ ¼ç²¾åº¦: 1

ğŸ’° æŠ•å…¥ä¼°ç®—ï¼š
  â€¢ æ¯æ ¼ä»·å€¼: $12 USDC
  â€¢ æ€»æŠ•å…¥: $6,000.00 USDC (å¦‚æœå…¨éƒ¨æˆäº¤)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“„ åŠ è½½ç°æœ‰é…ç½®: lighter-long-perp-btc.yaml
âœ… é…ç½®æ–‡ä»¶å·²ä¿å­˜: lighter-long-perp-btc.yaml

ğŸ”„ æ­£åœ¨åŒæ­¥é…ç½®åˆ°å…¶ä»–ç›®å½•...
âœ… åŒæ­¥å®Œæˆï¼

âœ… å…¨éƒ¨å®Œæˆï¼
```

### åœºæ™¯2ï¼šç”Ÿæˆæ–°ä»£å¸é…ç½®ï¼ˆä»æ¨¡æ¿ï¼‰

```bash
# ç”ŸæˆHYPEé…ç½®ï¼ˆå‡è®¾æ–‡ä»¶ä¸å­˜åœ¨ï¼‰
python3 tools/grid_config_generator.py hype

# å·¥å…·ä¼šï¼š
# 1. ä»æ¨¡æ¿æ–‡ä»¶åˆ›å»ºæ–°é…ç½®
# 2. è·å–HYPEä»·æ ¼
# 3. è®¡ç®—å‚æ•°
# 4. ä¿å­˜ä¸º lighter-long-perp-hype.yaml
# 5. åŒæ­¥åˆ°å…¶ä»–ç›®å½•ï¼ˆå¦‚æœå¯ç”¨ï¼‰
```

### åœºæ™¯3ï¼šå¯ç”¨Uæœ¬ä½é©¬ä¸é€’å¢

```bash
# 1. ç¼–è¾‘å·¥å…·é…ç½®
vim tools/grid_config_generator.yaml

# ä¿®æ”¹ï¼š
enable_martingale: true
martingale_increment_usd: 1  # æ¯æ ¼é€’å¢ $1 USDC

# 2. è¿è¡Œç”Ÿæˆå™¨
python3 tools/grid_config_generator.py eth

# é…ç½®æ–‡ä»¶ä¼šåŒ…å«ï¼š
# martingale_increment: 0.00027  # æ ¹æ®ETHä»·æ ¼è®¡ç®—
```

---

## ğŸ› ï¸ é«˜çº§åŠŸèƒ½

### 1. åšç©ºé…ç½®

```yaml
# tools/grid_config_generator.yaml
direction: "short"  # æ”¹ä¸ºåšç©º
```

åšç©ºæ—¶ï¼š
- ä»·æ ¼åŒºé—´ï¼šä»å½“å‰ä»·æ ¼**å‘ä¸Š**æ‰©å±•
- ä¸‹é™ = å½“å‰ä»·æ ¼
- ä¸Šé™ = å½“å‰ä»·æ ¼ Ã— (1 + åŒºé—´ç™¾åˆ†æ¯”)

### 2. ç°è´§é…ç½®

```yaml
# tools/grid_config_generator.yaml
market_type: "spot"  # æ”¹ä¸ºç°è´§
```

### 3. ç¦ç”¨è‡ªåŠ¨åŒæ­¥

```yaml
# tools/grid_config_generator.yaml
auto_sync: false  # ç¦ç”¨è‡ªåŠ¨åŒæ­¥
```

### 4. è‡ªå®šä¹‰APIåœ°å€

```yaml
# tools/grid_config_generator.yaml
lighter_api_url: "https://custom-api.lighter.xyz"
price_fetch_timeout: 20  # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•è·å–ä»·æ ¼

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ æ— æ³•è·å–ä»·æ ¼ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–APIé…ç½®
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ£€æŸ¥ Lighter API æ˜¯å¦å¯è®¿é—®
3. æ‰‹åŠ¨åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å‚æ•°

### é—®é¢˜2ï¼šæ¨¡æ¿æ–‡ä»¶ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ æ¨¡æ¿æ–‡ä»¶ä¸å­˜åœ¨: lighter-long-perp-æ¨¡ç‰ˆ.yaml
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿æ¨¡æ¿æ–‡ä»¶å­˜åœ¨ï¼š`config/grid/lighter-long-perp-æ¨¡ç‰ˆ.yaml`
2. æˆ–è€…ä¿®æ”¹å·¥å…·é…ç½®ï¼š
   ```yaml
   template_file: "lighter-long-perp-btc.yaml"  # ä½¿ç”¨å·²æœ‰æ–‡ä»¶ä½œä¸ºæ¨¡æ¿
   ```

### é—®é¢˜3ï¼šåŒæ­¥è„šæœ¬ä¸å­˜åœ¨

**è­¦å‘Šä¿¡æ¯ï¼š**
```
âš ï¸  åŒæ­¥è„šæœ¬ä¸å­˜åœ¨: ./sync_configs.sh
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿åŒæ­¥è„šæœ¬å­˜åœ¨ï¼š`tools/sync_configs.sh`
2. æˆ–è€…ç¦ç”¨è‡ªåŠ¨åŒæ­¥ï¼š
   ```yaml
   auto_sync: false
   ```

---

## ğŸ“‹ å‚æ•°å¯¹ç…§è¡¨

### Uæœ¬ä½æ–¹æ¡ˆ vs ä¼ ç»Ÿæ–¹æ¡ˆ

| Uæœ¬ä½æ–¹æ¡ˆå‚æ•° | ä¼ ç»Ÿæ–¹æ¡ˆå‚æ•° | è¯´æ˜ |
|--------------|-------------|------|
| `grid_value_per_order` | `order_amount` | æ¯æ ¼æŠ•å…¥é‡‘é¢ â†’ è‡ªåŠ¨è®¡ç®—æ•°é‡ |
| `grid_range_percentage` | `lower_price`, `upper_price` | ç™¾åˆ†æ¯” â†’ è‡ªåŠ¨è®¡ç®—ä»·æ ¼åŒºé—´ |
| `martingale_increment_usd` | `martingale_increment` | Uæœ¬ä½é€’å¢ â†’ è‡ªåŠ¨è®¡ç®—æ•°é‡é€’å¢ |

### è®¡ç®—å…¬å¼

```python
# åšå¤š (long)
lower_price = current_price Ã— (1 - range_percentage)
upper_price = current_price
grid_interval = (upper_price - lower_price) / grid_count
first_grid_price = lower_price + grid_interval
order_amount = grid_value_per_order / first_grid_price

# åšç©º (short)
lower_price = current_price
upper_price = current_price Ã— (1 + range_percentage)
grid_interval = (upper_price - lower_price) / grid_count
first_grid_price = upper_price - grid_interval
order_amount = grid_value_per_order / first_grid_price

# é©¬ä¸é€’å¢ï¼ˆUæœ¬ä½ï¼‰
avg_price = (lower_price + upper_price) / 2
martingale_increment = martingale_increment_usd / avg_price
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. å‚æ•°é€‰æ‹©å»ºè®®

| å‚æ•° | ä½æ³¢åŠ¨å¸ï¼ˆBTC/ETHï¼‰ | é«˜æ³¢åŠ¨å¸ï¼ˆå±±å¯¨å¸ï¼‰ |
|------|--------------------|--------------------|
| `grid_value_per_order` | $10-15 | $5-10 |
| `grid_range_percentage` | 30-50% | 50-80% |
| `follow_grid_count` | 300-500 | 500-1000 |

### 2. å·¥ä½œæµç¨‹å»ºè®®

```bash
# 1. æ‰¹é‡ç”Ÿæˆå¤šä¸ªä»£å¸é…ç½®
python3 tools/grid_config_generator.py btc
python3 tools/grid_config_generator.py eth
python3 tools/grid_config_generator.py mega

# 2. æ£€æŸ¥ç”Ÿæˆçš„é…ç½®æ–‡ä»¶
ls -l config/grid/lighter-long-perp-*.yaml

# 3. å¦‚éœ€è°ƒæ•´ï¼Œä¿®æ”¹å·¥å…·é…ç½®åé‡æ–°ç”Ÿæˆ
vim tools/grid_config_generator.yaml
python3 tools/grid_config_generator.py btc  # é‡æ–°ç”Ÿæˆ
```

### 3. å®‰å…¨å»ºè®®

- âœ… å¯ç”¨è‡ªåŠ¨åŒæ­¥å‰ï¼Œå…ˆåœ¨å•ä¸ªç›®å½•æµ‹è¯•
- âœ… å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶
- âœ… æ–°ä»£å¸é¦–æ¬¡è¿è¡Œå‰ï¼Œæ‰‹åŠ¨æ£€æŸ¥ç”Ÿæˆçš„é…ç½®
- âœ… ä½¿ç”¨å°èµ„é‡‘æµ‹è¯•æ–°å‚æ•°

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é…ç½®æ–‡ä»¶åŒæ­¥å·¥å…·](./README_sync_configs.md)
- [ç½‘æ ¼äº¤æ˜“ç³»ç»Ÿä¸»æ–‡æ¡£](../README.md)
- [Lighteräº¤æ˜“æ‰€æ–‡æ¡£](../docs/lighter_exchange.md)

---

## ğŸ¤ è´¡çŒ®

å‘ç°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Ÿæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ç¥ä½ äº¤æ˜“é¡ºåˆ©ï¼ğŸ“ˆ**

