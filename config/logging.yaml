# MESAäº¤æ˜“ç³»ç»Ÿæ—¥å¿—é…ç½®
# ç‰ˆæœ¬: 1.0.0

version: "1.0"
environment: "development"  # development, testing, production
root_level: "INFO"
disable_existing_loggers: false
log_directory: "logs"
async_logging: false
buffer_size: 1000
flush_interval: 1.0
enable_sensitive_data_filter: true
log_file_permissions: 0o640

# å¤„ç†å™¨é…ç½®
handlers:
  # æ§åˆ¶å°å¤„ç†å™¨ - å¼€å‘ç¯å¢ƒå®æ—¶æŸ¥çœ‹
  console:
    type: "console"
    level: "INFO"
    format: "colored"
    enabled: true
    include_module: true
    include_thread: false
    include_process: false
    date_format: "%H:%M:%S"
    exclude_modules:
      - "websockets"
      - "aiohttp"
      - "asyncio"
      - "urllib3"

  # ä¸»ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶ (ä¼˜åŒ–: å°†çº§åˆ«ä»DEBUGæå‡åˆ°INFOä»¥å‡å°‘ç£ç›˜å‹åŠ›)
  main_file:
    type: "rotating_file"
    level: "INFO"
    format: "json"
    enabled: true
    filename: "logs/trading_system.log"
    max_bytes: 5242880  # 5MB
    backup_count: 3
    include_module: true
    include_thread: false
    include_process: false
    date_format: "%Y-%m-%d %H:%M:%S"

  # é”™è¯¯æ—¥å¿—æ–‡ä»¶
  error_file:
    type: "rotating_file"
    level: "ERROR"
    format: "json"
    enabled: true
    filename: "logs/error.log"
    max_bytes: 5242880  # 5MB
    backup_count: 3
    include_module: true
    include_thread: true
    include_process: false
    date_format: "%Y-%m-%d %H:%M:%S"

  # æ•°æ®æµæ—¥å¿—æ–‡ä»¶
  data_file:
    type: "rotating_file"
    level: "INFO"
    format: "json"
    enabled: true
    filename: "logs/data.log"
    max_bytes: 5242880  # 5MB
    backup_count: 3
    include_module: false
    include_thread: false
    include_process: false
    date_format: "%Y-%m-%d %H:%M:%S"
    exclude_modules:
      - "core.logging"

  # äº¤æ˜“æ—¥å¿—æ–‡ä»¶
  trading_file:
    type: "rotating_file"
    level: "INFO"
    format: "json"
    enabled: true
    filename: "logs/trading.log"
    max_bytes: 5242880  # 5MB
    backup_count: 3
    include_module: true
    include_thread: false
    include_process: false
    date_format: "%Y-%m-%d %H:%M:%S"

  # æ€§èƒ½æ—¥å¿—æ–‡ä»¶
  performance_file:
    type: "rotating_file"
    level: "INFO"
    format: "performance"
    enabled: true
    filename: "logs/performance.log"
    max_bytes: 5242880  # 5MB
    backup_count: 3
    include_module: true
    include_thread: false
    include_process: false
    date_format: "%Y-%m-%d %H:%M:%S"

  # äº¤æ˜“æ‰€æ—¥å¿—æ–‡ä»¶
  exchange_file:
    type: "rotating_file"
    level: "INFO"
    format: "json"
    enabled: true
    filename: "logs/exchanges.log"
    max_bytes: 5242880  # 5MB
    backup_count: 3
    include_module: true
    include_thread: false
    include_process: false
    date_format: "%Y-%m-%d %H:%M:%S"

# æ—¥å¿—è®°å½•å™¨é…ç½®
loggers:
  # æ ¹æ—¥å¿—è®°å½•å™¨
  root:
    level: "INFO"
    handlers: ["console", "main_file", "error_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: false
    include_performance_metrics: false

  # ç³»ç»Ÿæ—¥å¿—è®°å½•å™¨
  system:
    level: "INFO"
    handlers: ["console", "main_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: false
    include_performance_metrics: false

  # æ•°æ®æ—¥å¿—è®°å½•å™¨
  data:
    level: "INFO"
    handlers: ["data_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: false
    include_performance_metrics: true
    max_message_length: 1000

  # é”™è¯¯æ—¥å¿—è®°å½•å™¨
  errors:
    level: "WARNING"
    handlers: ["console", "main_file", "error_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true
    include_performance_metrics: false

  # æ€§èƒ½æ—¥å¿—è®°å½•å™¨
  performance:
    level: "INFO"
    handlers: ["performance_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: false
    include_performance_metrics: true

  # äº¤æ˜“æ—¥å¿—è®°å½•å™¨
  trading:
    level: "INFO"
    handlers: ["console", "main_file", "trading_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true
    include_performance_metrics: false

  # äº¤æ˜“æ‰€æ—¥å¿—è®°å½•å™¨
  exchanges:
    level: "INFO"
    handlers: ["console", "main_file", "exchange_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true
    include_performance_metrics: false

  # æ ¸å¿ƒæ¨¡å—æ—¥å¿—é…ç½®
  core:
    level: "INFO"
    handlers: ["console", "main_file"]
    propagate: false
    enabled: true
    include_context: true

  # ğŸ”¥ å¥åº·æ£€æŸ¥æ—¥å¿—ï¼ˆæ³¨æ„ï¼šæ­¤é…ç½®æš‚æœªç”Ÿæ•ˆï¼Œå®é™…é…ç½®åœ¨ä»£ç ä¸­ï¼‰
  # å¥åº·æ£€æŸ¥ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—é…ç½®ï¼Œç›´æ¥åœ¨ order_health_checker.py ä¸­å®ç°
  core.services.grid.implementations.order_health_checker:
    level: "DEBUG"
    handlers: ["main_file"]  # åªä½¿ç”¨æ–‡ä»¶å¤„ç†å™¨ï¼Œä¸ä½¿ç”¨console
    propagate: false
    enabled: true
    include_context: true

  # Socket.IOæœåŠ¡å™¨æ—¥å¿—
  socketio:
    level: "INFO"
    handlers: ["console", "main_file"]
    propagate: false
    enabled: true
    include_context: true

  # EdgeXäº¤æ˜“æ‰€æ—¥å¿—
  edgex:
    level: "INFO"
    handlers: ["console", "exchange_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true

  # Backpackäº¤æ˜“æ‰€æ—¥å¿—
  backpack:
    level: "INFO"
    handlers: ["console", "exchange_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true

  # ğŸ”¥ Backpacké€‚é…å™¨æ—¥å¿—ï¼ˆåŒ…å«WebSocketï¼‰
  ExchangeAdapter.backpack:
    level: "INFO"
    handlers: ["console", "exchange_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true

  # ğŸ”¥ æ–°å¢ï¼šHyperliquidäº¤æ˜“æ‰€æ—¥å¿—
  hyperliquid:
    level: "INFO"
    handlers: ["console", "exchange_file"]
    propagate: false
    enabled: true
    include_context: true
    include_correlation_id: true

  # WebSocketæ•°æ®ç›¸å…³æœåŠ¡æ—¥å¿—ä¼˜åŒ– (å‡å°‘è¯¦ç»†æ—¥å¿—ä»¥èŠ‚çœç£ç›˜ç©ºé—´)
  MarketDataService:
    level: "WARNING"
    handlers: ["console", "main_file"]
    propagate: false
    enabled: true
    include_context: true

  EnhancedMonitoringServiceImpl:
    level: "WARNING"
    handlers: ["console", "main_file"]
    propagate: false
    enabled: true
    include_context: true

  SubscriptionService:
    level: "WARNING"
    handlers: ["console", "main_file"]
    propagate: false
    enabled: true
    include_context: true

  # ç¬¬ä¸‰æ–¹åº“æ—¥å¿—æ§åˆ¶
  websockets:
    level: "ERROR"
    handlers: ["error_file"]
    propagate: false
    enabled: true

  aiohttp:
    level: "ERROR"
    handlers: ["error_file"]
    propagate: false
    enabled: true

  asyncio:
    level: "ERROR"
    handlers: ["error_file"]
    propagate: false
    enabled: true

  urllib3:
    level: "ERROR"
    handlers: ["error_file"]
    propagate: false
    enabled: true

# ğŸ”¥ æ–°å¢ï¼šäº¤æ˜“æ‰€ç»Ÿè®¡ä¿¡æ¯æ‰“å°é¢‘ç‡é…ç½®
exchange_statistics_frequency:
  # æ ¹æ®äº¤æ˜“æ‰€æ”¯æŒçš„å¸ç§æ•°é‡åŠ¨æ€è°ƒæ•´ç»Ÿè®¡ä¿¡æ¯æ‰“å°é¢‘ç‡
  # å¸ç§æ•°é‡è¶Šå¤šï¼Œæ‰“å°é¢‘ç‡è¶Šä½ï¼Œé¿å…æ—¥å¿—è¿‡äºé¢‘ç¹
  
  # é»˜è®¤é…ç½®ï¼ˆé€‚ç”¨äºå°å‹äº¤æ˜“æ‰€ï¼‰
  default:
    message_stats_frequency: 100       # æ¯100æ¡æ¶ˆæ¯æ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    callback_stats_frequency: 50       # æ¯50ä¸ªå›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    orderbook_stats_frequency: 50      # æ¯50ä¸ªorderbookæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    global_callback_frequency: 50      # æ¯50ä¸ªå…¨å±€å›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    
  # EdgeXäº¤æ˜“æ‰€ï¼ˆæ”¯æŒçº¦50ç§å¸ç§ï¼‰
  edgex:
    message_stats_frequency: 100       # æ¯100æ¡æ¶ˆæ¯æ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    callback_stats_frequency: 50       # æ¯50ä¸ªå›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    orderbook_stats_frequency: 50      # æ¯50ä¸ªorderbookæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    global_callback_frequency: 50      # æ¯50ä¸ªå…¨å±€å›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    
  # Backpackäº¤æ˜“æ‰€ï¼ˆæ”¯æŒçº¦30ç§å¸ç§ï¼‰
  backpack:
    message_stats_frequency: 100       # æ¯100æ¡æ¶ˆæ¯æ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    callback_stats_frequency: 30       # æ¯30ä¸ªå›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    orderbook_stats_frequency: 30      # æ¯30ä¸ªorderbookæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    global_callback_frequency: 30      # æ¯30ä¸ªå…¨å±€å›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    
  # ğŸ”¥ Hyperliquidäº¤æ˜“æ‰€ï¼ˆæ”¯æŒæ•°ç™¾ç§å¸ç§ï¼‰- å¤§å¹…é™ä½æ‰“å°é¢‘ç‡
  hyperliquid:
    message_stats_frequency: 1000      # æ¯1000æ¡æ¶ˆæ¯æ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    callback_stats_frequency: 500      # æ¯500ä¸ªå›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    orderbook_stats_frequency: 500     # æ¯500ä¸ªorderbookæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    global_callback_frequency: 500     # æ¯500ä¸ªå…¨å±€å›è°ƒæ‰“å°ä¸€æ¬¡ç»Ÿè®¡
    
  # è‡ªé€‚åº”é…ç½®è§„åˆ™
  adaptive_rules:
    # æ ¹æ®å¸ç§æ•°é‡è‡ªåŠ¨è°ƒæ•´é¢‘ç‡
    # å¦‚æœå¸ç§æ•°é‡è¶…è¿‡thresholdï¼Œåˆ™ä½¿ç”¨å¯¹åº”çš„multiplier
    thresholds:
      small_exchange: 
        max_symbols: 50
        multiplier: 1.0
      medium_exchange:
        max_symbols: 100
        multiplier: 2.0
      large_exchange:
        max_symbols: 200
        multiplier: 5.0
      huge_exchange:
        max_symbols: 500
        multiplier: 10.0 